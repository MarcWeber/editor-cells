#!/usr/bin/env
# cells API using implementation at cells_py
from cells.py import cell_collection

def emit(event):
  if 'reply_to' in event:
    event['wait_for'] = event.get('wait_for', [])
    event['results']  = event.get('results', [])

  if not 'origin_network' in event:
    event['origin_network'] = cell_collection.prefix
  cell_collection.emit_selector({'type': 'emit', 'event': event})

def kill(selector):
  emit({'type': 'killcells', 'selector': selector})

def log(lines):
  emit({'type': 'log', 'lines': lines})
