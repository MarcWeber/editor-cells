#!/usr/bin/env python

import unittest
import cells.util
import re

class TestUtils(unittest.TestCase):

    def test_CompletionWordsFromStr(self):
        cwfs = cells.util.CompletionWordsFromStr('abc', ['prefix', 'camel_case_like', 'ignore_case'])
        s1 = 'abc aee_bee_cee ABC'

        expected_words = s1.split(' ')
        self.assertEqual(cwfs.all(s1), expected_words)

        # zoomb should not be matched
        self.assertEqual(cwfs.all(s1+" zoomb"), expected_words)

    def test_match_regex_str_by_types(self):
        def test(type, word, to_be_matched): 
            s = cells.util.match_regex_str_by_types(word, [type])
            re_ = re.compile('^'+s)
            for m in to_be_matched:
                self.assertTrue(re_.match(m) != None)

        test('last_upper', 'aZ', to_be_matched = ['auoz'])
        test('prefix', 'aZ', to_be_matched = ['aZoetnh'])
        test('camel_case_like', 'abc', to_be_matched = ['ab_boo_clown'])
